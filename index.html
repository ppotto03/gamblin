<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUPER NEON ROYAL - ëª¨ì˜ ë„ë°• ì²´í—˜ ì‚¬ì´íŠ¸</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --bg-dark: #050505;
            --neon-gold: #eebb4d;
            --neon-red: #ff3131;
            --neon-blue: #00d4ff;
            --neon-pink: #ff00ff;
            --card-bg: #151515;
        }

        body {
            background-color: var(--bg-dark);
            color: #fff;
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0; padding: 0;
            overflow-x: hidden;
        }

        /* --- ë„¤ì˜¨ í…ìŠ¤íŠ¸ íš¨ê³¼ --- */
        .neon-text {
            text-shadow: 0 0 5px #fff, 0 0 10px var(--neon-gold), 0 0 20px var(--neon-gold);
        }
        .neon-border {
            border: 2px solid var(--neon-blue);
            box-shadow: 0 0 10px var(--neon-blue);
        }

        /* --- ê°€ì§œ ê´‘ê³  ë°°ë„ˆ --- */
        .fake-ad {
            background: linear-gradient(90deg, #ff0000, #ff8800);
            color: white;
            text-align: center;
            padding: 10px;
            font-weight: 900;
            font-size: 14px;
            animation: blink 0.5s infinite alternate;
            cursor: pointer;
        }
        @keyframes blink { from { opacity: 1; } to { opacity: 0.5; } }

        .side-ad {
            position: fixed;
            right: 10px;
            top: 50%;
            width: 120px;
            background: var(--card-bg);
            border: 2px solid var(--neon-pink);
            padding: 10px;
            z-index: 99;
            font-size: 12px;
            text-align: center;
        }

        /* ìƒë‹¨ í—¤ë” */
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: #000;
            border-bottom: 2px solid var(--neon-gold);
            position: sticky; top: 0; z-index: 1000;
        }
        .logo { font-size: 28px; font-weight: 900; color: #fff; font-style: italic; }
        .logo span { color: var(--neon-red); text-shadow: 0 0 10px var(--neon-red); }

        .balance-badge {
            background: #222;
            border: 1px solid var(--neon-gold);
            padding: 8px 15px;
            border-radius: 50px;
            color: var(--neon-gold);
            font-weight: 800;
            box-shadow: inset 0 0 5px var(--neon-gold);
        }

        /* ê²Œì„ ì„ íƒ í™”ë©´ */
        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            padding: 20px;
        }
        .game-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid #333;
            transition: 0.3s;
            position: relative;
        }
        .game-card:hover { transform: translateY(-5px); border-color: var(--neon-blue); }
        .game-thumb { height: 160px; background-size: cover; background-position: center; }
        .game-info { padding: 15px; text-align: center; }

        /* ë² íŒ… ì»¨íŠ¸ë¡¤ëŸ¬ */
        .bet-box {
            background: #111;
            padding: 20px;
            border-radius: 10px;
            border: 1px dashed var(--neon-gold);
            margin: 20px 0;
        }
        input[type="number"] {
            background: #000;
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 15px;
            font-size: 20px;
            width: 70%;
            text-align: center;
            border-radius: 5px;
            outline: none;
        }
        .btn-max {
            background: var(--neon-red);
            color: white;
            padding: 15px;
            font-weight: bold;
            border-radius: 5px;
        }

        /* ë°”ì¹´ë¼ í…Œì´ë¸” */
        .bac-table {
            background: radial-gradient(circle, #004d40 0%, #00241a 100%);
            border-radius: 100px 100px 20px 20px;
            padding: 40px;
            border: 10px solid #3e2723;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }
        .card-slot {
            min-height: 120px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .card-img {
            width: 70px;
            animation: flipIn 0.6s ease-out;
        }
        @keyframes flipIn {
            from { transform: rotateY(90deg); opacity: 0; }
            to { transform: rotateY(0deg); opacity: 1; }
        }

        /* ë·° ì „í™˜ */
        .view { display: none; padding-bottom: 100px; }
        .active-view { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        button { cursor: pointer; border: none; transition: 0.2s; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-action {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            font-weight: 900;
            border-radius: 8px;
            margin-top: 10px;
        }
    </style>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, increment, arrayUnion } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";

        // ğŸ”¥ ë³¸ì¸ì˜ Firebase ì„¤ì •ê°’ì„ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!
        const firebaseConfig = {
  apiKey: "AIzaSyDOVJtg5lxJTBP2Vm1mzbuecKu9Rg-I4k4",
  authDomain: "gambling-23339.firebaseapp.com",
  projectId: "gambling-23339",
  storageBucket: "gambling-23339.firebasestorage.app",
  messagingSenderId: "1031894079454",
  appId: "1:1031894079454:web:960ca0f1748493cdd9af4f",
  measurementId: "G-GT74F5GVR2"
};

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let userData = { balance: 0 };

        // ìœ í‹¸ë¦¬í‹°: ì§€ì—° í•¨ìˆ˜
        const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        // --- ì´ë¯¸ì§€ ìì‚° ë¡œë“œ ---
        const snailImg = new Image();
        snailImg.src = "https://i.ibb.co/6NGp6yR/snail-top.png"; // ê³ í’ˆì§ˆ ë‹¬íŒ½ì´ PNG
        const trackBg = new Image();
        trackBg.src = "https://www.transparenttextures.com/patterns/p6-dark.png"; // í™/íŠ¸ë™ ëŠë‚Œì˜ íŒ¨í„´

        window.showView = (id) => {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active-view'));
            document.getElementById(id).classList.add('active-view');
            if(id === 'snailGame') initSnail();
        };

        const refreshData = async () => {
            if(!auth.currentUser) return;
            const snap = await getDoc(doc(db, "users", auth.currentUser.uid));
            userData = snap.data();
            document.querySelectorAll('.balance-val').forEach(el => el.innerText = userData.balance.toLocaleString());
        };

        // --- ê²Œì„ 1: ìŠ¤í”¼ë“œ ë‹¬íŒ½ì´ ---
        let snailPos = [20, 20, 20];
        let snailRacing = false;

        function initSnail() {
            const cvs = document.getElementById('snailCanvas');
            const ctx = cvs.getContext('2d');
            function draw() {
                ctx.fillStyle = "#2e1a05"; // ê¹Šì€ í™ìƒ‰
                ctx.fillRect(0, 0, cvs.width, cvs.height);
                
                // íŠ¸ë™ ë¼ì¸
                ctx.strokeStyle = "rgba(238, 187, 77, 0.3)";
                ctx.lineWidth = 2;
                for(let i=1; i<3; i++) {
                    ctx.beginPath(); ctx.moveTo(0, i*100); ctx.lineTo(cvs.width, i*100); ctx.stroke();
                }

                // ê²°ìŠ¹ì„ 
                ctx.fillStyle = varColor('--neon-red');
                ctx.fillRect(cvs.width-50, 0, 10, cvs.height);

                snailPos.forEach((x, i) => {
                    ctx.drawImage(snailImg, x, i*100 + 20, 60, 60);
                    ctx.fillStyle = "#fff";
                    ctx.font = "bold 16px Arial";
                    ctx.fillText(`${i+1}ë²ˆ`, x+15, i*100 + 15);
                });
                if(snailRacing) requestAnimationFrame(draw);
                else draw();
            }
            draw();
        }

        window.runSnail = async () => {
            const bet = parseInt(document.getElementById('snail-bet').value);
            if(!bet || bet <= 0 || bet > userData.balance) return alert("ë² íŒ… ê¸ˆì•¡ì„ í™•ì¸í•˜ì„¸ìš”.");

            const pick = parseInt(document.querySelector('input[name="spick"]:checked').value);
            
            // ì…ë ¥ ì ê¸ˆ
            snailRacing = true;
            toggleControls('snailGame', true);
            await updateDoc(doc(db, "users", auth.currentUser.uid), { balance: increment(-bet) });
            refreshData();

            let winner = -1;
            const race = setInterval(async () => {
                for(let i=0; i<3; i++) {
                    snailPos[i] += Math.random() * 4;
                    if(snailPos[i] > 740) winner = i;
                }

                if(winner !== -1) {
                    clearInterval(race);
                    snailRacing = false;
                    const isWin = (winner === pick);
                    const reward = isWin ? Math.floor(bet * 2.9) : 0;
                    
                    alert(isWin ? `[ë‹¹ì²¨] ${winner+1}ë²ˆ ë‹¬íŒ½ì´ ìŠ¹ë¦¬! ${reward.toLocaleString()}ì› íšë“!` : `[ë‚™ì²¨] ${winner+1}ë²ˆ ë‹¬íŒ½ì´ê°€ ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤.`);
                    
                    await updateDoc(doc(db, "users", auth.currentUser.uid), { 
                        balance: increment(reward),
                        history: arrayUnion({ game: 'snail', bet, profit: reward - bet, time: new Date().toISOString() })
                    });
                    snailPos = [20, 20, 20];
                    toggleControls('snailGame', false);
                    refreshData();
                    initSnail();
                }
            }, 30);
        };

        // --- ê²Œì„ 2: ë¦¬ì–¼ ë°”ì¹´ë¼ ---
        window.playBac = async (choice) => {
            const bet = parseInt(document.getElementById('bac-bet').value);
            if(!bet || bet <= 0 || bet > userData.balance) return alert("ë² íŒ… ê¸ˆì•¡ì„ í™•ì¸í•˜ì„¸ìš”.");

            toggleControls('baccaratGame', true);
            await updateDoc(doc(db, "users", auth.currentUser.uid), { balance: increment(-bet) });
            refreshData();

            const pDiv = document.getElementById('p-cards');
            const bDiv = document.getElementById('b-cards');
            pDiv.innerHTML = ''; bDiv.innerHTML = '';

            const getCard = () => {
                const n = Math.floor(Math.random()*13)+1;
                const s = ['H','D','C','S'][Math.floor(Math.random()*4)];
                return { n, s, score: n >= 10 ? 0 : (n === 1 ? 1 : n) };
            };

            // ì¹´ë“œ ë°°ë¶„ (í˜„ì‹¤ì ì¸ ë”œë ˆì´)
            const c = [getCard(), getCard(), getCard(), getCard()];
            const draw = (div, card) => {
                const img = document.createElement('img');
                const val = card.n === 1 ? 'A' : (card.n >= 11 ? (card.n===11?'J':card.n===12?'Q':'K') : card.n);
                img.src = `https://deckofcardsapi.com/static/img/${val}${card.s}.png`;
                img.className = 'card-img';
                div.appendChild(img);
            };

            await sleep(800); draw(pDiv, c[0]);
            await sleep(800); draw(bDiv, c[2]);
            await sleep(800); draw(pDiv, c[1]);
            await sleep(800); draw(bDiv, c[3]);
            await sleep(1000);

            const pScore = (c[0].score + c[1].score) % 10;
            const bScore = (c[2].score + c[3].score) % 10;
            const result = pScore > bScore ? 'player' : (bScore > pScore ? 'banker' : 'tie');

            let mult = 0;
            if(choice === result) mult = (result === 'tie' ? 9 : 2);

            alert(`í”Œë ˆì´ì–´: ${pScore} vs ë±…ì»¤: ${bScore}\n\n${result.toUpperCase()} ìŠ¹ë¦¬!`);
            
            await updateDoc(doc(db, "users", auth.currentUser.uid), { 
                balance: increment(bet * mult),
                history: arrayUnion({ game: 'baccarat', bet, profit: (bet*mult)-bet, time: new Date().toISOString() })
            });
            
            toggleControls('baccaratGame', false);
            refreshData();
        };

        // --- ê²Œì„ 3: ëŸ­í‚¤íŒŸ (Lucky Pot) ---
        window.spinLucky = async () => {
            const bet = parseInt(document.getElementById('pot-bet').value);
            if(!bet || bet <= 0 || bet > userData.balance) return alert("ë² íŒ… ê¸ˆì•¡ì„ í™•ì¸í•˜ì„¸ìš”.");

            const potDisplay = document.getElementById('pot-display');
            toggleControls('luckyPot', true);
            await updateDoc(doc(db, "users", auth.currentUser.uid), { balance: increment(-bet) });

            let count = 0;
            const spin = setInterval(() => {
                potDisplay.innerText = Math.floor(Math.random()*900 + 100);
                potDisplay.style.color = ['#ff0', '#f0f', '#0ff'][count%3];
                count++;
                if(count > 20) {
                    clearInterval(spin);
                    const win = Math.random() < 0.1; // 10% í™•ë¥ 
                    const reward = win ? bet * 10 : 0;
                    potDisplay.innerText = win ? "JACKPOT" : "LOSE";
                    alert(win ? "ëŒ€ë°•! 10ë°° ì­íŒŸ ë‹¬ì„±!" : "ê½ì…ë‹ˆë‹¤. ë‹¤ì‹œ ë„ì „í•˜ì„¸ìš”.");
                    
                    updateDoc(doc(db, "users", auth.currentUser.uid), { 
                        balance: increment(reward) 
                    }).then(refreshData);
                    toggleControls('luckyPot', false);
                }
            }, 100);
        };

        // ê³µí†µ ê¸°ëŠ¥
        window.allIn = (inputId) => {
            document.getElementById(inputId).value = userData.balance;
        };

        function toggleControls(viewId, isLock) {
            const container = document.getElementById(viewId);
            container.querySelectorAll('input, button:not(.btn-exit)').forEach(el => el.disabled = isLock);
        }

        function varColor(name) { return getComputedStyle(document.documentElement).getPropertyValue(name); }

        // ì´ˆê¸°í™”
        onAuthStateChanged(auth, u => {
            if(u) { refreshData(); showView('lobby'); }
            else showView('login');
        });

        window.handleAuth = async (isLogin) => {
            const e = document.getElementById('email').value;
            const p = document.getElementById('pw').value;
            try {
                if(isLogin) await signInWithEmailAndPassword(auth, e, p);
                else {
                    const uc = await createUserWithEmailAndPassword(auth, e, p);
                    await setDoc(doc(db, "users", uc.user.uid), { balance: 1000000, history: [] });
                }
            } catch(err) { alert(err.message); }
        };

    </script>
</head>
<body>

    <div class="fake-ad">âš ï¸ [ê¸´ê¸‰] ì˜¤ëŠ˜ë§Œ ì…ê¸ˆ ì‹œ í¬ì¸íŠ¸ 2ë°° ì§€ê¸‰! ì§€ê¸ˆ ë°”ë¡œ ì°¸ì—¬í•˜ì„¸ìš”! âš ï¸</div>

    <div id="login" class="view active-view" style="text-align: center; margin-top: 100px;">
        <h1 class="logo neon-text">SUPER <span>NEON</span> ROYAL</h1>
        <div style="max-width: 300px; margin: auto;">
            <input type="email" id="email" placeholder="ì´ë©”ì¼ ì£¼ì†Œ" style="width:100%; margin-bottom:10px;">
            <input type="password" id="pw" placeholder="ë¹„ë°€ë²ˆí˜¸" style="width:100%; margin-bottom:20px;">
            <button class="btn-action" style="background:var(--neon-gold)" onclick="handleAuth(true)">ì…ì¥í•˜ê¸°</button>
            <button class="btn-action" style="background:transparent; color:#888; border:1px solid #444;" onclick="handleAuth(false)">ë¬´ë£Œ ê°€ì…</button>
        </div>
    </div>

    <div id="lobby" class="view">
        <div class="app-header">
            <div class="logo">SUPER <span>N</span> R</div>
            <div class="balance-badge">ë³´ìœ : <span class="balance-val">0</span> â‚©</div>
        </div>

        <div class="side-ad neon-border">
            <p style="color:var(--neon-pink)">ì‹¤ì‹œê°„ ì­íŒŸ</p>
            <h3 id="jackpot-num">4,290,100</h3>
            <p style="font-size:10px">user2**ë‹˜ ë°©ê¸ˆ ë‹¹ì²¨!</p>
        </div>

        <div class="game-grid">
            <div class="game-card" onclick="showView('snailGame')">
                <div class="game-thumb" style="background-image: url('https://images.unsplash.com/photo-1534067783941-51c9c23ecefd?auto=format&fit=crop&w=600&q=80');"></div>
                <div class="game-info"><h3>ğŸ ìŠ¤í”¼ë“œ ë‹¬íŒ½ì´</h3><p>2.9ë°° ë°°ë‹¹ | ì‹¤ì‹œê°„ ë ˆì´ìŠ¤</p></div>
            </div>
            <div class="game-card" onclick="showView('baccaratGame')">
                <div class="game-thumb" style="background-image: url('https://images.unsplash.com/photo-1596838132731-3301c3fd4317?auto=format&fit=crop&w=600&q=80');"></div>
                <div class="game-info"><h3>ğŸƒ VIP ë°”ì¹´ë¼</h3><p>2ë°°/9ë°° ë°°ë‹¹ | ì •í†µ ì¹´ì§€ë…¸</p></div>
            </div>
            <div class="game-card" onclick="showView('luckyPot')">
                <div class="game-thumb" style="background-image: url('https://images.unsplash.com/photo-1518133910546-b6c2fb7d79e3?auto=format&fit=crop&w=600&q=80');"></div>
                <div class="game-info"><h3>ğŸ’ ëŸ­í‚¤ íŒŸ</h3><p>10ë°° ì­íŒŸ ê¸°íšŒ</p></div>
            </div>
        </div>
    </div>

    <div id="snailGame" class="view">
        <div class="app-header">
            <button class="btn-exit" onclick="showView('lobby')" style="background:none; color:#fff;"><i class="fa-solid fa-chevron-left"></i> ë¡œë¹„ë¡œ</button>
            <div class="balance-badge"><span class="balance-val">0</span> â‚©</div>
        </div>
        <div style="padding: 20px; max-width: 800px; margin: auto;">
            <canvas id="snailCanvas" width="800" height="300" style="width:100%; border-radius: 10px;"></canvas>
            
            <div class="bet-box">
                <div style="display:flex; justify-content: space-around; margin-bottom: 20px;">
                    <label><input type="radio" name="spick" value="0" checked> 1ë²ˆ</label>
                    <label><input type="radio" name="spick" value="1"> 2ë²ˆ</label>
                    <label><input type="radio" name="spick" value="2"> 3ë²ˆ</label>
                </div>
                <div style="display:flex; gap:10px;">
                    <input type="number" id="snail-bet" placeholder="ë² íŒ…ì•¡ ì…ë ¥">
                    <button class="btn-max" onclick="allIn('snail-bet')">ALL-IN</button>
                </div>
                <button class="btn-action" style="background:var(--neon-gold)" onclick="runSnail()">ê²½ê¸° ì‹œì‘</button>
            </div>
        </div>
    </div>

    <div id="baccaratGame" class="view">
        <div class="app-header">
            <button class="btn-exit" onclick="showView('lobby')" style="background:none; color:#fff;"><i class="fa-solid fa-chevron-left"></i> ë¡œë¹„ë¡œ</button>
            <div class="balance-badge"><span class="balance-val">0</span> â‚©</div>
        </div>
        <div style="padding: 20px; max-width: 800px; margin: auto;">
            <div class="bac-table">
                <div style="display:flex; justify-content: space-around;">
                    <div style="text-align:center;">
                        <h4 style="color:var(--neon-blue)">PLAYER</h4>
                        <div id="p-cards" class="card-slot"></div>
                    </div>
                    <div style="text-align:center;">
                        <h4 style="color:var(--neon-red)">BANKER</h4>
                        <div id="b-cards" class="card-slot"></div>
                    </div>
                </div>
            </div>

            <div class="bet-box" style="text-align: center;">
                <input type="number" id="bac-bet" placeholder="ë² íŒ…ì•¡" style="width:60%">
                <button class="btn-max" onclick="allIn('bac-bet')">MAX</button>
                <div style="display:flex; gap:10px; margin-top:15px;">
                    <button class="btn-action" style="background:var(--neon-blue)" onclick="playBac('player')">í”Œë ˆì´ì–´</button>
                    <button class="btn-action" style="background:#4caf50" onclick="playBac('tie')">íƒ€ì´</button>
                    <button class="btn-action" style="background:var(--neon-red)" onclick="playBac('banker')">ë±…ì»¤</button>
                </div>
            </div>
        </div>
    </div>

    <div id="luckyPot" class="view">
        <div class="app-header">
            <button class="btn-exit" onclick="showView('lobby')" style="background:none; color:#fff;"><i class="fa-solid fa-chevron-left"></i> ë¡œë¹„ë¡œ</button>
        </div>
        <div style="text-align: center; padding: 50px 20px;">
            <div id="pot-display" style="font-size: 80px; font-weight: 900; margin: 40px 0; color: var(--neon-gold);">READY</div>
            <div class="bet-box">
                <input type="number" id="pot-bet" placeholder="ë² íŒ…ì•¡">
                <button class="btn-max" onclick="allIn('pot-bet')">MAX</button>
                <button class="btn-action" style="background:var(--neon-pink)" onclick="spinLucky()">í–‰ìš´ì˜ ìƒì ì—´ê¸°</button>
            </div>
        </div>
    </div>

</body>
</html>