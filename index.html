<div id="myPage" class="view">
                <h2 style="color:var(--point-gold);">내 배팅 상세 기록</h2>
                <div class="bet-panel" style="text-align:left;">
                    <div style="display:flex; justify-content:space-around; background:#111; padding:20px; border-radius:10px; margin-bottom:20px; border:1px solid #333;">
                        <div>아이디: <span id="myEmail" style="color:#fff;">-</span></div>
                        <div>현재 잔액: <span id="myBalance" style="color:var(--point-gold);">0</span> KRW</div>
                    </div>
                    <h4>최근 15경기 배팅 내역</h4>
                    <table style="width:100%; text-align:center;">
                        <thead style="background:#222;">
                            <tr>
                                <th>게임 종류</th>
                                <th>배팅금액</th>
                                <th>결과(수익)</th>
                                <th>배팅 시간</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody">
                            </tbody>
                    </table>
                </div>
            </div>

<script type="module">
        // ... (Firebase 설정 및 변수 선언 생략) ...

        // [수정] 뷰 전환 시 마이페이지 기록 로드 추가
        window.showView = (id) => {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active-view'));
            document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('menu-active'));
            document.getElementById(id).classList.add('active-view');
            
            if(id === 'snailView') initSnail();
            if(id === 'myPage') loadMyPage(); // 마이페이지 진입 시 함수 실행
            updateAsset();
        };

        // [추가] 마이페이지 기록 불러오기 함수
        async function loadMyPage() {
            if(!userObj) return;
            const snap = await getDoc(doc(db, "users", userObj.uid));
            const data = snap.data();
            
            // 정보 업데이트
            document.getElementById('myEmail').innerText = userObj.email;
            document.getElementById('myBalance').innerText = data.balance.toLocaleString();

            const history = data.history || [];
            const tbody = document.getElementById('historyTableBody');
            
            if(history.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" style="padding:40px; color:#666;">배팅 기록이 없습니다.</td></tr>';
                return;
            }

            // 최신순 정렬 후 15개 출력
            tbody.innerHTML = history.slice().reverse().slice(0, 15).map(h => `
                <tr>
                    <td style="padding:15px;">${h.game}</td>
                    <td>${h.bet.toLocaleString()}</td>
                    <td style="color:${h.profit >= 0 ? '#4caf50' : '#ff5252'}; font-weight:bold;">
                        ${h.profit >= 0 ? '+' : ''}${h.profit.toLocaleString()}
                    </td>
                    <td style="color:#888; font-size:11px;">${h.time ? h.time.replace('T', ' ').slice(5, 16) : '-'}</td>
                </tr>
            `).join('');
        }

        // ... (나머지 바카라, 달팽이, 슬롯, CS 로직은 기존과 동일) ...
    </script>